<!DOCTYPE html>
<html>
<head>
    <title>My Survey</title>
    <!-- jsPsych ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ -->
    <script src="https://unpkg.com/jspsych@7.3.4"></script>
    <!-- í•„ìš”í•œ í”ŒëŸ¬ê·¸ì¸ë“¤ ë¡œë“œ -->
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.3"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-text@1.1.3"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-button-response@1.1.3"></script>
    <!-- jsPsych ê¸°ë³¸ ìŠ¤íƒ€ì¼ -->
    <link href="https://unpkg.com/jspsych@7.3.4/css/jspsych.css" rel="stylesheet" type="text/css" />
    <!-- ëª¨ë°”ì¼ ìµœì í™” ìŠ¤íƒ€ì¼ -->
    <style>
        /* ëª¨ë°”ì¼ì—ì„œ í…ìŠ¤íŠ¸ í¬ê¸° ì¡°ì • */
        @media (max-width: 768px) {
            body {
                font-size: 18px !important;
            }
            
            .jspsych-content {
                font-size: 16px !important;
                line-height: 1.6 !important;
            }
            
            h4 {
                font-size: 20px !important;
            }
            
            /* ë…¸ë€ìƒ‰ ìê·¹ì–´ í¬ê¸° ì¡°ì • */
            span[style*="background-color: #ffeb3b"] {
                font-size: 28px !important;
            }
            
            /* ëŒ€í™” ë‚´ìš© í¬ê¸° ì¡°ì • */
            div[style*="font-family: monospace"] {
                font-size: 16px !important;
            }
        }
    </style>
</head>
</head>
<body></body>
<script>

    // jsPsych ì´ˆê¸°í™”
    var jsPsych = initJsPsych({
        on_finish: function() {
            // ì‹¤í—˜ ëë‚˜ë©´ ê²°ê³¼ í™”ë©´ì— í‘œì‹œ (ë‚˜ì¤‘ì— ì„œë²„ ì €ì¥ìœ¼ë¡œ ë³€ê²½ ì˜ˆì •)
            jsPsych.data.displayData();
        }
    });

    // ì‹¤í—˜ ìˆœì„œë¥¼ ë‹´ì„ ë°°ì—´
    var timeline = [];

    // 1. í™˜ì˜ ë©”ì‹œì§€
    var welcome = {
        type: jsPsychHtmlButtonResponse,
        stimulus: `
            <h2>ì„¤ë¬¸ì¡°ì‚¬ì— ì°¸ì—¬í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!</h2>
            <p>ì´ ì„¤ë¬¸ì€ ë‹¤ì„¯ ë¬¸í•­ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆê³  ì•½ 2ë¶„ ì •ë„ ì†Œìš”ë©ë‹ˆë‹¤.</p>
        `,
        choices: ['ì‹œì‘í•˜ê¸°']
    };
    // 2. ì¼ë°˜ í…ìŠ¤íŠ¸ ì§ˆë¬¸ë“¤
    var basic_questions = {
        type: jsPsychSurveyText,
        questions: [
            {
                prompt: '(ë§Œ) ë‚˜ì´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”. (ìˆ«ìë§Œ ì…ë ¥)', 
                name: 'age',
                required: true
            },
            {
                prompt: 'ì„±ë³„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”. (ë‚¨/ì—¬)', 
                name: 'sex',
                required: true
            },
            {
                prompt: 'í˜„ì¬ ì¬í•™ ì¤‘ì¸ í•™êµì™€ í•™ê³¼ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”(ì—†ìœ¼ë©´ "ì—†ìŒ"ìœ¼ë¡œ ì…ë ¥):', 
                name: 'school_department',
                required: true
            },
            {
                prompt: 'ì£¼ ì„±ì¥ ì§€ì—­(í•™ì°½ ì‹œì ˆì„ ì˜¤ë˜ ë³´ë‚¸ ì§€ì—­)ì€ ì–´ë””ì…ë‹ˆê¹Œ?:', 
                name: 'growth_location',
                required: true
            },
            {
                prompt: 'ë¶€ëª¨ë‹˜ì˜ ì£¼ ì„±ì¥ ì§€ì—­(í•™ì°½ ì‹œì ˆì„ ì˜¤ë˜ ë³´ë‚¸ ì§€ì—­)ì€ ì–´ë””ì…ë‹ˆê¹Œ?:', 
                name: 'parents_region',
                required: true
            }
        ],
        preamble: '<h3>ê¸°ë³¸ ì •ë³´</h3>'
    };

    // ì „ì—­ ë³€ìˆ˜ (ê° ë¬¸í•­ìš©)
    var rtData = {};

    // ë°˜ì‘ì‹œê°„ ì¸¡ì • í•¨ìˆ˜ (ê³µí†µ)
    function createRTQuestion(prompt_content, response_name, scenario_name, question_number) {
        return {
            type: jsPsychSurveyText,
            questions: [
                {
                    prompt: prompt_content,
                    name: response_name,
                    required: true
                }
            ],
            data: {
                task_type: 'conversation_reaction_time',
                scenario: scenario_name,
                question_number: question_number
            },
            on_load: function() {
                var questionStartTime = performance.now();
                var firstKeyPressed = false;
                rtData[question_number] = null;
                
                console.log('ë¬¸í•­ ' + question_number + ' (' + scenario_name + ') ë¡œë“œë¨');
                
                setTimeout(function() {
                    var inputField = document.querySelector('input[type="text"]');
                    console.log('ì…ë ¥ í•„ë“œ ì°¾ê¸° ê²°ê³¼:', inputField ? 'ì„±ê³µ' : 'ì‹¤íŒ¨');
                    
                    if (inputField) {
                        console.log('âœ… ' + scenario_name + ' ë°˜ì‘ì‹œê°„ ì¸¡ì • ì¤€ë¹„ ì™„ë£Œ');
                        
                        inputField.addEventListener('input', function(e) {
                            console.log('ì…ë ¥ ì´ë²¤íŠ¸ ë°œìƒ:', e.target.value);
                            
                            if (!firstKeyPressed) {
                                rtData[question_number] = Math.round(performance.now() - questionStartTime);
                                firstKeyPressed = true;
                                console.log('ğŸ¯ ' + scenario_name + ' ì²« í‚¤ ì…ë ¥ ë°˜ì‘ì‹œê°„: ' + rtData[question_number] + 'ms');
                            }
                        });
                        
                        inputField.focus();
                        
                    } else {
                        console.log('âŒ ' + scenario_name + ' ì…ë ¥ í•„ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
                    }
                }, 1000);
            },
            on_finish: function(data) {
                if (rtData[question_number] !== null) {
                    data.first_key_rt = rtData[question_number];
                    console.log('âœ… ' + scenario_name + ' ë°˜ì‘ì‹œê°„ ë°ì´í„° ì €ì¥: ' + rtData[question_number] + 'ms');
                } else {
                    console.log('âŒ ' + scenario_name + ' ë°˜ì‘ì‹œê°„ ì¸¡ì • ì‹¤íŒ¨ - ë°ì´í„°ê°€ null');
                }
            }
        };
    }

    // 3. ëŒ€í™” ìƒí™© ë°˜ì‘ì‹œê°„ ì¸¡ì • ë¬¸í•­ë“¤
    var conversation_rt_question = createRTQuestion(
        `<div style="background-color: #f9f9f9; padding: 20px; border-radius: 10px; line-height: 1.6;">
<h4 style="margin-top: 0; color: #333;">ë‹¤ìŒ ëŒ€í™”ë¥¼ ì½ê³  ë¹ˆì¹¸ì— ë“¤ì–´ê°ˆ ì ì ˆí•œ ë§ì„ ì…ë ¥í•˜ì„¸ìš”:</h4>

<div style="background-color: white; padding: 15px; border-left: 4px solid #4CAF50; margin: 15px 0;">
<strong>ìƒí™©:</strong> Aê°€ ê¸¸ì„ ê°€ë‹¤ê°€ ìœ íŠœë¸Œ í¬ë¦¬ì—ì´í„° Bë¥¼ ë§Œë‚œ ìƒí™©
</div>

<div style="font-family: monospace; background-color: white; padding: 15px; border: 1px solid #ddd;">
<div style="margin-bottom: 8px;"><strong>A:</strong> ì–´!! ì•ˆë…•í•˜ì„¸ìš”. ì € ìœ íŠœë¸Œì—ì„œ ë´¤ì–´ìš”!</div>
<div style="margin-bottom: 8px;"><strong>B:</strong> ì•ˆë…•í•˜ì„¸ìš”~ ì •ë§ìš”??</div>
<div style="margin-bottom: 8px;"><strong>A:</strong> ë„¤!!</div>
<div style="margin-bottom: 8px;"><strong>B:</strong> ê°ì‚¬í•©ë‹ˆë‹¤~ ì œ ì˜ìƒ ì–´ë–»ê²Œ ë³´ì…¨ì–´ìš”?</div>
<div style="margin-bottom: 8px;"><strong>A:</strong> <span style="background-color: #ffeb3b; padding: 2px 5px;">__________</span> ë´¤ì–´ìš”!</div>
</div>


</div>`,
        'conversation_response_0',
        'ìœ íŠœë²„ ë§Œë‚¨',
        1
    );

    var conversation_rt_question_1 = createRTQuestion(
        `<div style="background-color: #f9f9f9; padding: 20px; border-radius: 10px; line-height: 1.6;">
<h4 style="margin-top: 0; color: #333;">ë‹¤ìŒ ëŒ€í™”ë¥¼ ì½ê³  ë¹ˆì¹¸ì— ë“¤ì–´ê°ˆ ì ì ˆí•œ ë§ì„ ì…ë ¥í•˜ì„¸ìš”:</h4>

<div style="background-color: white; padding: 15px; border-left: 4px solid #FF9800; margin: 15px 0;">
<strong>ìƒí™©:</strong> Aê°€ ê¸¸ì„ ê°€ë‹¤ê°€ ìœ ëª… ì‰í”„ Bë¥¼ ë§Œë‚œ ìƒí™©
</div>

<div style="font-family: monospace; background-color: white; padding: 15px; border: 1px solid #ddd;">
<div style="margin-bottom: 8px;"><strong>A:</strong> ì–´? í˜¹ì‹œ... B ì‰í”„ë‹˜ì´ì„¸ìš”?</div>
<div style="margin-bottom: 8px;"><strong>B:</strong> ì•„, ë„¤ ë§ìŠµë‹ˆë‹¤.</div>
<div style="margin-bottom: 8px;"><strong>A:</strong> ì§€ë‚œë²ˆì— ì‰í”„ ë‹˜ ì‹ë‹¹ì—ì„œ ì‹ì‚¬í–ˆì–´ìš”!!</div>
<div style="margin-bottom: 8px;"><strong>B:</strong> ì•„, ì •ë§ìš”? ê°ì‚¬í•©ë‹ˆë‹¤. ì–´ë–»ê²Œ ë“œì…¨ì–´ìš”?</div>
<div style="margin-bottom: 8px;"><strong>A:</strong> <span style="background-color: #ffeb3b; padding: 2px 5px;">__________</span> ë¨¹ì—ˆì–´ìš”!</div>
</div>


</div>`,
        'conversation_response_1',
        'ì‰í”„ ë§Œë‚¨',
        2
    );

    var conversation_rt_question_2 = createRTQuestion(
        `<div style="background-color: #f9f9f9; padding: 20px; border-radius: 10px; line-height: 1.6;">
<h4 style="margin-top: 0; color: #333;">ë‹¤ìŒ ëŒ€í™”ë¥¼ ì½ê³  ë¹ˆì¹¸ì— ë“¤ì–´ê°ˆ ì ì ˆí•œ ë§ì„ ì…ë ¥í•˜ì„¸ìš”:</h4>

<div style="background-color: white; padding: 15px; border-left: 4px solid #E91E63; margin: 15px 0;">
<strong>ìƒí™©:</strong> ì‹ ë¶€ Bì˜ ê²°í˜¼ì‹ì¥ì—ì„œ
</div>

<div style="font-family: monospace; background-color: white; padding: 15px; border: 1px solid #ddd;">
<div style="margin-bottom: 8px;"><strong>A:</strong> ì˜¤ëœë§Œì´ì•¼. ê²°í˜¼ ì¶•í•˜í•´.</div>
<div style="margin-bottom: 8px;"><strong>B:</strong> ì–´? A? ì •ë§ ì˜¤ëœë§Œì´ë‹¤! ì–´ë–»ê²Œ ì™”ì–´!</div>
<div style="margin-bottom: 8px;"><strong>A:</strong> <span style="background-color: #ffeb3b; padding: 2px 5px;">__________</span> ì™”ì§€.</div>
</div>


</div>`,
        'conversation_response_2',
        'ê²°í˜¼ì‹',
        3
    );

    var conversation_rt_question_3 = createRTQuestion(
        `<div style="background-color: #f9f9f9; padding: 20px; border-radius: 10px; line-height: 1.6;">
<h4 style="margin-top: 0; color: #333;">ë‹¤ìŒ ëŒ€í™”ë¥¼ ì½ê³  ë¹ˆì¹¸ì— ë“¤ì–´ê°ˆ ì ì ˆí•œ ë§ì„ ì…ë ¥í•˜ì„¸ìš”:</h4>

<div style="background-color: white; padding: 15px; border-left: 4px solid #9C27B0; margin: 15px 0;">
<strong>ìƒí™©:</strong> ë…ì Aê°€ íŒ¬ ì‚¬ì¸íšŒ ìë¦¬ì—ì„œ ì‘ê°€ Bë¥¼ ë§Œë‚œ ìƒí™©
</div>

<div style="font-family: monospace; background-color: white; padding: 15px; border: 1px solid #ddd;">
<div style="margin-bottom: 8px;"><strong>A:</strong> ì•ˆë…•í•˜ì„¸ìš”! ì •ë§ ëµ™ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤.</div>
<div style="margin-bottom: 8px;"><strong>B:</strong> ë„¤, ë°˜ê°‘ìŠµë‹ˆë‹¤ Aë‹˜. ì œ ì±…ì„ ì–´ë–»ê²Œ ì½ìœ¼ì…¨ë‚˜ìš”?</div>
<div style="margin-bottom: 8px;"><strong>A:</strong> <span style="background-color: #ffeb3b; padding: 2px 5px;">__________</span> ì½ì—ˆì–´ìš”!</div>
</div>


</div>`,
        'conversation_response_3',
        'íŒ¬ ì‚¬ì¸íšŒ',
        4
    );

    var conversation_rt_question_4 = createRTQuestion(
        `<div style="background-color: #f9f9f9; padding: 20px; border-radius: 10px; line-height: 1.6;">
<h4 style="margin-top: 0; color: #333;">ë‹¤ìŒ ëŒ€í™”ë¥¼ ì½ê³  ë¹ˆì¹¸ì— ë“¤ì–´ê°ˆ ì ì ˆí•œ ë§ì„ ì…ë ¥í•˜ì„¸ìš”:</h4>

<div style="background-color: white; padding: 15px; border-left: 4px solid #4CAF50; margin: 15px 0;">
<strong>ìƒí™©:</strong> ê³ ì–‘ì´ì— ëŒ€í•œ ëŒ€í™”
</div>

<div style="font-family: monospace; background-color: white; padding: 15px; border: 1px solid #ddd;">
<div style="margin-bottom: 8px;"><strong>A:</strong> ë„ˆ ê³ ì–‘ì´ ìœ ê¸°ë¬˜ ì„¼í„°ì—ì„œ ë°ë ¤ì™”ì§€?</div>
<div style="margin-bottom: 8px;"><strong>B:</strong> ì‘. ê±°ê¸°ì„œ ì²˜ìŒ ë°ë ¤ì˜¬ ë•Œ ê³ ìƒí–ˆì–´.</div>
<div style="margin-bottom: 8px;"><strong>A:</strong> ì™œ ê³ ìƒí•´?</div>
<div style="margin-bottom: 8px;"><strong>B:</strong> ì•ˆ ì˜¤ë ¤ê³  í•´ì„œ.</div>
<div style="margin-bottom: 8px;"><strong>A:</strong> ê·¸ëŸ¼ ì–´ë–»ê²Œ ë°ë ¤ì™”ì–´?</div>
<div style="margin-bottom: 8px;"><strong>B:</strong> <span style="background-color: #ffeb3b; padding: 2px 5px;">__________</span> ë°ë ¤ì™”ì§€.</div>
</div>


</div>`,
        'conversation_response_4',
        'ê³ ì–‘ì´ ì…ì–‘',
        5
    );

    // 5. ë§ˆë¬´ë¦¬ ë©”ì‹œì§€
    var debrief = {
        type: jsPsychHtmlButtonResponse,
        stimulus: `
            <h2>ì„¤ë¬¸ì¡°ì‚¬ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</h2>
            <p>ì°¸ì—¬í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.</p>
        `,
        choices: ['ê²°ê³¼ í™•ì¸']
    };

    // ì‹¤í—˜ ìˆœì„œ ì„¤ì •
// ëŒ€í™” ìƒí™© ë¬¸í•­ë“¤ì„ ë°°ì—´ì— ë‹´ê¸°
    var conversation_questions = [
        conversation_rt_question,     // ìœ íŠœë²„ ë§Œë‚¨
        conversation_rt_question_1,   // ì‰í”„ ë§Œë‚¨  
        conversation_rt_question_2,   // ê²°í˜¼ì‹
        conversation_rt_question_3,   // íŒ¬ ì‚¬ì¸íšŒ
        conversation_rt_question_4    // ê³ ì–‘ì´ ì…ì–‘
    ];

    // ë°°ì—´ ìˆœì„œ ëœë¤í•˜ê²Œ ì„ê¸°
    conversation_questions = jsPsych.randomization.shuffle(conversation_questions);

    // ì‹¤í—˜ ìˆœì„œ ì„¤ì •
    timeline.push(welcome);
    timeline.push(basic_questions);
    
    // ëœë¤ ìˆœì„œë¡œ ëŒ€í™” ë¬¸í•­ë“¤ ì¶”ê°€
    for (var i = 0; i < conversation_questions.length; i++) {
        timeline.push(conversation_questions[i]);
    }
    
    timeline.push(debrief);

    // ì‹¤í—˜ ì‹œì‘!
    jsPsych.run(timeline);

</script>

</html>


